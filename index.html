<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XKCD Color Spectrum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="text-slate-800 min-h-screen flex flex-col pb-24">

    <!-- Primary Header -->
    <header class="bg-white border-b border-slate-200 z-40 sticky top-0 w-full">
        <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                
                <!-- Title -->
                <div class="flex items-center gap-3 w-full md:w-auto justify-between md:justify-start">
                    <div>
                        <div class="flex items-center gap-2">
                            <h1 id="headerTitle" class="text-2xl font-bold tracking-tight text-slate-900">XKCD Spectrum</h1>
                            <a id="dataSourceLink" href="https://xkcd.com/color/rgb/" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-7 h-7 rounded-full text-slate-400 hover:text-indigo-600 hover:bg-slate-100 transition-colors shrink-0" title="Data source: https://xkcd.com/color/rgb/">
                                <i class="fas fa-circle-info text-base"></i>
                            </a>
                        </div>
                        <p id="headerSubtitle" class="text-xs text-slate-500 font-medium">954 Named Colors</p>
                    </div>
                </div>

                <!-- Primary Controls (Search & View) -->
                <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto items-center">
                    <!-- Search -->
                    <div class="relative group w-full md:w-64">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-slate-400 group-focus-within:text-indigo-500 transition-colors"></i>
                        </div>
                        <input type="text" id="searchInput" 
                            class="block w-full pl-10 pr-24 py-2 border border-slate-300 rounded-lg leading-5 bg-slate-50 placeholder-slate-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-all shadow-sm"
                            placeholder="Find 'baby puke'...">
                        <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                            <span id="resultCount" class="text-xs text-slate-400 font-mono"></span>
                        </div>
                    </div>

                    <!-- View Toggle Group -->
                    <div class="flex items-center gap-2 w-full sm:w-auto justify-between sm:justify-start">
                        <!-- Language Toggle -->
                        <button id="langToggle" onclick="toggleLanguage()" class="p-1.5 rounded-lg border border-slate-200 text-slate-500 text-xs font-bold hover:text-indigo-600 hover:border-indigo-300 bg-white h-[38px] w-[38px] transition-all">
                            ‰∏≠
                        </button>

                        <div class="flex bg-slate-100 p-1 rounded-lg border border-slate-200 h-[38px] items-center">
                            <button id="viewGridBtn" class="p-1.5 rounded-md bg-white shadow-sm text-indigo-600 transition-all w-9 flex justify-center items-center" onclick="setView('grid')" title="Card View">
                                <i class="fas fa-th-large text-sm"></i>
                            </button>
                            <button id="viewCompactBtn" class="p-1.5 rounded-md text-slate-400 hover:text-slate-600 transition-all w-9 flex justify-center items-center" onclick="setView('compact')" title="Compact View">
                                <i class="fas fa-grip text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filter Bar inside Header (Sticky) -->
        <div class="border-t border-slate-100 bg-white/95 backdrop-blur-sm">
            <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-2">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                    <!-- Quick Hue Toggles -->
                    <div class="flex items-center gap-3 w-full overflow-x-auto p-1 scrollbar-hide">
                        <span id="filterLabel" class="text-xs font-semibold text-slate-400 uppercase tracking-wider mr-1 hidden sm:block">Filter</span>
                        <button class="hue-btn w-6 h-6 rounded-full bg-red-500 shadow-sm shrink-0" onclick="toggleHuePreset('red')" data-color-key="red" title="Red" style="--ring-color: #ef4444;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-orange-500 shadow-sm shrink-0" onclick="toggleHuePreset('orange')" data-color-key="orange" title="Orange" style="--ring-color: #f97316;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-yellow-400 shadow-sm shrink-0" onclick="toggleHuePreset('yellow')" data-color-key="yellow" title="Yellow" style="--ring-color: #facc15;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-green-500 shadow-sm shrink-0" onclick="toggleHuePreset('green')" data-color-key="green" title="Green" style="--ring-color: #22c55e;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-cyan-400 shadow-sm shrink-0" onclick="toggleHuePreset('cyan')" data-color-key="cyan" title="Cyan/Teal" style="--ring-color: #22d3ee;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-blue-500 shadow-sm shrink-0" onclick="toggleHuePreset('blue')" data-color-key="blue" title="Blue" style="--ring-color: #3b82f6;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-purple-500 shadow-sm shrink-0" onclick="toggleHuePreset('purple')" data-color-key="purple" title="Purple" style="--ring-color: #a855f7;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-pink-400 shadow-sm shrink-0" onclick="toggleHuePreset('pink')" data-color-key="pink" title="Pink" style="--ring-color: #f472b6;"></button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-slate-500 shadow-sm flex items-center justify-center shrink-0" onclick="toggleHuePreset('grey')" data-color-key="grey" title="Grey/Black" style="--ring-color: #64748b;">
                            
                        </button>
                        <button class="hue-btn w-6 h-6 rounded-full bg-[#8B4513] shadow-sm shrink-0" onclick="toggleHuePreset('brown')" data-color-key="brown" title="Brown" style="--ring-color: #8B4513;"></button>
                    </div>

                    <!-- Sort Dropdown -->
                    <div class="flex items-center gap-2 min-w-fit ml-auto">
                        <i class="fas fa-sort-amount-down text-slate-400 text-xs"></i>
                        <select id="sortSelect" class="block w-36 pl-2 pr-8 py-1 text-xs border-slate-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white shadow-sm cursor-pointer hover:bg-slate-50 transition-colors">
                            <option value="hue">üåà Rainbow</option>
                            <option value="alpha">üî§ Name (A-Z)</option>
                            <option value="light">‚òÄÔ∏è Lightest</option>
                            <option value="dark">üåë Darkest</option>
                            <option value="saturation">üé® Vivid</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow bg-slate-50 relative z-0 w-full">
        <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- Loading State -->
            <div id="loading" class="flex flex-col items-center justify-center h-64 space-y-4">
                <div class="w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"></div>
                <p id="loadingText" class="text-slate-500 font-medium">Mixing colors...</p>
            </div>

            <!-- Color Grid -->
            <div id="colorGrid" class="hidden">
                <!-- Color items injected via JS -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="hidden flex-col items-center justify-center py-20 text-center">
                <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-palette text-slate-300 text-2xl"></i>
                </div>
                <h3 id="emptyTitle" class="text-lg font-medium text-slate-900">No colors found</h3>
                <p id="emptyDesc" class="text-slate-500">Try adjusting your filters or search.</p>
            </div>
        </div>
    </main>

    <!-- Floating Action Button for Palette -->
    <button id="paletteFab" onclick="togglePaletteCard()" class="fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all z-40 transform hover:scale-105 active:scale-95 group duration-300">
        <i class="fas fa-swatchbook text-xl"></i>
        <div id="paletteBadge" class="absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full text-white text-xs font-bold flex items-center justify-center border-2 border-slate-50 shadow-sm hidden">0</div>
    </button>

    <!-- Draggable Floating Palette Card -->
    <div id="paletteCard" class="fixed bottom-24 right-6 w-80 bg-white rounded-xl shadow-2xl border border-slate-200 z-50 flex flex-col palette-hidden">
        <!-- Card Header (Drag Handle) -->
        <div id="paletteHeader" class="p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50 rounded-t-xl cursor-grab active:cursor-grabbing select-none">
            <div>
                <h2 id="paletteCardTitle" class="text-sm font-bold text-slate-800 uppercase tracking-wider">Palette</h2>
                <p class="text-xs text-slate-500"><span id="paletteCount">0</span>/5 selected</p>
            </div>
            <div class="flex items-center gap-3">
                <i class="fas fa-grip-lines text-slate-300" title="Drag to move"></i>
                <button onclick="togglePaletteCard()" class="w-6 h-6 rounded-full hover:bg-slate-200 flex items-center justify-center text-slate-400 transition-colors" title="Close">
                    <i class="fas fa-times text-xs"></i>
                </button>
            </div>
        </div>

        <!-- Card Content (List) -->
        <div id="paletteList" class="flex-1 overflow-y-auto p-0 min-h-[150px]">
            <!-- Empty State -->
            <div id="paletteEmpty" class="flex flex-col items-center justify-center h-full text-slate-400 p-8 text-center min-h-[150px]">
                <i class="fas fa-fill-drip text-3xl mb-3 opacity-50"></i>
                <p id="paletteEmptyText" class="text-xs">Click the + button on colors to add them here.</p>
            </div>
            <!-- Items generated here -->
        </div>

        <!-- Card Footer -->
        <div class="p-4 border-t border-slate-100 bg-slate-50 rounded-b-xl">
            <div class="flex gap-2">
                <button id="paletteCopyBtn" onclick="copyPalette()" class="flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-xs font-semibold transition-colors shadow-sm flex items-center justify-center gap-2">
                    <i class="fas fa-copy"></i> Copy All
                </button>
                <button id="paletteClearBtn" onclick="clearPalette()" class="px-4 py-2 bg-white border border-slate-300 hover:bg-slate-100 text-slate-700 rounded-lg text-xs font-semibold transition-colors">
                    Clear
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="fixed bottom-24 right-5 z-50 flex flex-col gap-2 pointer-events-none"></div>

    <script src="translations.js"></script>
    <script src="app.js"></script>
</body>
</html>